<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HOI4 Tarzı Arayüz</title>
<style>
  /* Genel reset ve temel font */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    background: #1e2228;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    color: #eee;
    user-select: none;
  }

  #app {
    display: grid;
    grid-template-columns: 300px 1fr 400px;
    grid-template-rows: 90px 1fr 200px;
    grid-template-areas:
      "header header header"
      "sidebar map rightpanel"
      "log log log";
    height: 100vh;
  }

  /* HEADER */
  header {
    grid-area: header;
    background: #2d313a;
    border-bottom: 2px solid #444a55;
    display: flex;
    align-items: center;
    padding: 0 20px;
    gap: 15px;
  }

  /* Bayrak ve ülke bilgisi */
  #country-flag {
    width: 60px;
    height: 40px;
    background: #444a55;
    border: 2px solid #666d7a;
    border-radius: 4px;
    flex-shrink: 0;
  }

  #country-info {
    flex-grow: 1;
  }

  #country-info h1 {
    margin: 0;
    font-size: 24px;
    font-weight: 700;
    color: #f5d547;
    text-shadow: 1px 1px 3px #0008;
  }

  #country-info p {
    margin: 2px 0 0 0;
    font-size: 14px;
    color: #ccc;
  }

  /* SIDEBAR (Odak Ağacı) */
  #sidebar {
    grid-area: sidebar;
    background: #252a33;
    border-right: 2px solid #444a55;
    overflow-y: auto;
    padding: 10px 15px;
  }

  #sidebar h2 {
    margin-top: 0;
    color: #f5d547;
    font-size: 18px;
    border-bottom: 1px solid #444a55;
    padding-bottom: 8px;
  }

  .focus-tree {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-top: 12px;
  }

  .focus {
    background: #3a3f4a;
    padding: 10px 15px;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: inset 0 0 8px #0008;
    color: #eee;
    user-select: none;
    transition: background 0.3s ease;
  }

  .focus:hover:not(.completed) {
    background: #5c62ab;
  }

  .focus.completed {
    background: #427f46;
    color: #b6e2a1;
    text-decoration: line-through;
    cursor: default;
    box-shadow: inset 0 0 8px #2a4a1a;
  }

  /* MAP */
  #map {
    grid-area: map;
    background: #1f2128 url('https://upload.wikimedia.org/wikipedia/commons/e/e5/Europe_blank_map_1936.svg') no-repeat center;
    background-size: contain;
    border: 2px solid #444a55;
    border-radius: 6px;
    position: relative;
  }

  /* Şehir işaretleri */
  .city {
    position: absolute;
    background: #f5d547;
    border-radius: 50%;
    width: 16px; height: 16px;
    box-shadow: 0 0 6px #f5d547aa;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    color: #222;
    font-size: 12px;
    user-select: none;
    transition: transform 0.2s ease;
  }
  .city:hover {
    transform: scale(1.3);
    box-shadow: 0 0 12px #f5d547dd;
  }

  /* RIGHT PANEL */
  #rightpanel {
    grid-area: rightpanel;
    background: #252a33;
    border-left: 2px solid #444a55;
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 10px 15px;
    overflow-y: auto;
  }

  .panel {
    background: #2d313a;
    border-radius: 6px;
    padding: 12px 15px;
    box-shadow: inset 0 0 10px #0006;
  }

  .panel h3 {
    margin-top: 0;
    color: #f5d547;
    font-size: 16px;
    border-bottom: 1px solid #444a55;
    padding-bottom: 6px;
  }

  .btn {
    background: #3a3f4a;
    color: #eee;
    border: none;
    border-radius: 4px;
    padding: 8px 12px;
    margin: 5px 2px 0 0;
    cursor: pointer;
    transition: background 0.25s ease;
  }
  .btn:hover {
    background: #5c62ab;
  }

  /* LOG */
  #log {
    grid-area: log;
    background: #22262e;
    border-top: 2px solid #444a55;
    padding: 10px 15px;
    font-size: 13px;
    overflow-y: auto;
    box-shadow: inset 0 0 8px #000a;
    line-height: 1.3;
    height: 200px;
  }
</style>
</head>
<body>
<div id="app">

  <header>
    <div id="country-flag"></div>
    <div id="country-info">
      <h1>Ülke Adı</h1>
      <p>Başkent: - | Manpower: - | Çelik: - | Petrol: -</p>
    </div>
  </header>

  <aside id="sidebar">
    <h2>Odak Ağacı</h2>
    <div class="focus-tree" id="focus-tree">
      <!-- Odaklar buraya gelecek -->
    </div>
  </aside>

  <main id="map">
    <!-- Şehir işaretleri -->
  </main>

  <section id="rightpanel">
    <div class="panel" id="diplomacy-panel">
      <h3>Diplomasi</h3>
      <div id="diplomacy-info">
        <!-- Diplomasi bilgisi -->
      </div>
    </div>
    <div class="panel" id="production-panel">
      <h3>Fabrika & Üretim</h3>
      <div id="production-info">
        <!-- Üretim bilgisi -->
      </div>
    </div>
    <div class="panel" id="army-panel">
      <h3>Ordu</h3>
      <div id="army-info">
        <!-- Ordu bilgisi -->
      </div>
    </div>
  </section>

  <footer id="log">
    <!-- Olay günlüğü -->
  </footer>

</div>

<script>
  // Örnek şehir verisi
  const cities = [
    { id: "berlin", name: "Berlin", country: "GER", x: 60, y: 40 },
    { id: "paris", name: "Paris", country: "FRA", x: 40, y: 50 },
    { id: "london", name: "Londra", country: "ENG", x: 35, y: 40 },
    { id: "moscow", name: "Moskova", country: "SOV", x: 80, y: 60 },
    { id: "rome", name: "Roma", country: "ITA", x: 55, y: 65 }
  ];

  // Örnek ülkeler
  const countries = {
    GER: {
      name: "Almanya",
      capital: "berlin",
      flagColor: "#d00",
      manpower: 500,
      steel: 100,
      oil: 80,
      focuses: [
        { id: "rearmament", name: "Yeniden Silahlanma", description: "Orduyu güçlendirin.", completed: false },
        { id: "industrial_expansion", name: "Sanayi Genişletmesi", description: "Fabrika sayısını artır.", completed: false },
        { id: "blitzkrieg", name: "Yıldırım Savaşı", description: "Hızlı saldırı taktikleri.", completed: false },
      ],
      diplomacy: {
        allies: ["ITA"],
        enemies: ["FRA", "ENG", "SOV"],
        neutral: ["POL", "HUN"]
      },
      army: { infantry: 50, tanks: 20, planes: 30, ships: 15 },
      factories: { military: 20, civilian: 15, naval: 10 }
    }
  };

  let selectedCountryCode = "GER";

  function renderFlag(color) {
    const flag = document.getElementById("country-flag");
    flag.style.background = color;
  }

  function renderCountryInfo(country) {
    const info = document.getElementById("country-info");
    info.innerHTML = `
      <h1>${country.name}</h1>
      <p>Başkent: ${cities.find(c => c.id === country.capital).name} | İşgücü: ${country.manpower} | Çelik: ${country.steel} | Petrol: ${country.oil}</p>
    `;
  }

  function renderFocusTree(country) {
    const container = document.getElementById("focus-tree");
    container.innerHTML = "";
    country.focuses.forEach(focus => {
      const div = document.createElement("div");
      div.className = "focus" + (focus.completed ? " completed" : "");
      div.textContent = focus.name;
      div.title = focus.description;
      if (!focus.completed) {
        div.onclick = () => {
          focus.completed = true;
          log(`Odak "${focus.name}" tamamlandı.`);
          renderFocusTree(country);
        };
      }
      container.appendChild(div);
    });
  }

  function renderCities() {
    const map = document.getElementById("map");
    cities.forEach(city => {
      const cityDiv = document.createElement("div");
      cityDiv.className = "city";
      cityDiv.style.left = city.x + "%";
      cityDiv.style.top = city.y + "%";
      cityDiv.title = city.name + " (" + countries[city.country]?.name + ")";
      cityDiv.textContent = city.name[0];
      cityDiv.onclick = () => {
        if (countries[city.country]) {
          selectCountry(city.country);
        }
      };
      map.appendChild(cityDiv);
    });
  }

  function renderDiplomacy(country) {
    const dip = document.getElementById("diplomacy-info");
    dip.innerHTML = `
      <p><strong>Müttefikler:</strong> ${country.diplomacy.allies.map(a => countries[a]?.name || a).join(", ") || "Yok"}</p>
      <p><strong>Düşmanlar:</strong> ${country.diplomacy.enemies.map(e => countries[e]?.name || e).join(", ") || "Yok"}</p>
      <p><strong>Tarafsızlar:</strong> ${country.diplomacy.neutral.map(n => countries[n]?.name || n).join(", ") || "Yok"}</p>
    `;
  }

  function renderProduction(country) {
    const prod = document.getElementById("production-info");
    prod.innerHTML = `
      <p><strong>Askeri Fabrikalar:</strong> ${country.factories.military}</p>
      <p><strong>Sivil Fabrikalar:</strong> ${country.factories.civilian}</p>
      <p><strong>Deniz Fabrikaları:</strong> ${country.factories.naval}</p>
    `;
  }

  function renderArmy(country) {
    const army = document.getElementById("army-info");
    army.innerHTML = `
      <p><strong>Piyade:</strong> ${country.army.infantry}</p>
      <p><strong>Tank:</strong> ${country.army.tanks}</p>
      <p><strong>Uçak:</strong> ${country.army.planes}</p>
      <p><strong>Gemi:</strong> ${country.army.ships}</p>
    `;
  }

  function log(text) {
    const logDiv = document.getElementById("log");
    const time = new Date().toLocaleTimeString();
    logDiv.innerHTML += `[${time}] ${text}<br>`;
    logDiv.scrollTop = logDiv.scrollHeight;
  }

  function selectCountry(code) {
    if (!countries[code]) return;
    selectedCountryCode = code;
    const country = countries[code];
    renderFlag(country.flagColor || "#555");
    renderCountryInfo(country);
    renderFocusTree(country);
    renderDiplomacy(country);
    renderProduction(country);
    renderArmy(country);
    log(`${country.name} seçildi.`);
  }

  function init() {
    renderCities();
    selectCountry(selectedCountryCode);
  }

  window.onload = init;


  // Ülkeler
  const countries = {
    GER: {
      name: "Almanya",
      capital: "berlin",
      factories: { military: 20, civilian: 15, naval: 10 },
      resources: { steel: 100, oil: 80, manpower: 500 },
      focuses: [
        { id: "rearmament", name: "Yeniden Silahlanma", description: "Orduyu güçlendirin.", completed: false },
        { id: "autarky", name: "Otonomi Ekonomisi", description: "Kendi kaynaklarımızı kullan.", completed: false },
        { id: "expand_influence", name: "Etkileşim Alanını Genişlet", description: "Diplomatik etkiyi artır.", completed: false },
        { id: "fortify_borders", name: "Sınırları Güçlendir", description: "Savunmayı artır.", completed: false },
        { id: "build_navy", name: "Donanma İnşası", description: "Deniz gücünü artır.", completed: false },
        { id: "air_superiority", name: "Hava Üstünlüğü", description: "Hava kuvvetlerini geliştir.", completed: false },
        { id: "blitzkrieg", name: "Yıldırım Savaşı", description: "Hızlı saldırı taktikleri.", completed: false },
        { id: "research_tanks", name: "Tank Araştırması", description: "Tank teknolojisini geliştirin.", completed: false },
        { id: "infrastructure", name: "Altyapı Geliştirme", description: "Lojistik ve ulaşımı artır.", completed: false },
        { id: "industrial_expansion", name: "Sanayi Genişletmesi", description: "Fabrika sayısını artır.", completed: false },
      ],
      army: { infantry: 50, tanks: 20, planes: 30, ships: 15 },
      diplomacy: { allies: ["ITA"], enemies: ["FRA", "ENG", "SOV"], neutral: ["POL", "HUN"] },
    },
    FRA: {
      name: "Fransa",
      capital: "paris",
      factories: { military: 18, civilian: 20, naval: 12 },
      resources: { steel: 80, oil: 60, manpower: 450 },
      focuses: [
        { id: "maginot_line", name: "Maginot Hattı", description: "Sınır savunması güçlendir.", completed: false },
        { id: "defensive_doctrine", name: "Savunma Doktrini", description: "Orduyu savunma üzerine kur.", completed: false },
        { id: "build_airforce", name: "Hava Kuvvetleri İnşası", description: "Hava gücünü artır.", completed: false },
        { id: "research_artillery", name: "Topçu Araştırması", description: "Topçu gücünü artır.", completed: false },
        { id: "expand_influence", name: "Etkileşim Alanını Genişlet", description: "Diplomasi ile etkiyi artır.", completed: false },
        { id: "industrial_upgrade", name: "Sanayi Modernizasyonu", description: "Fabrikaları yenile.", completed: false },
        { id: "mobilization", name: "Seferberlik", description: "Manpower artır.", completed: false },
        { id: "naval_build", name: "Donanma İnşası", description: "Deniz gücünü artır.", completed: false },
        { id: "alliances", name: "Müttefiklerle İttifak", description: "Diplomatik bağları güçlendir.", completed: false },
        { id: "air_superiority", name: "Hava Üstünlüğü", description: "Hava kuvvetlerini geliştir.", completed: false },
      ],
      army: { infantry: 40, tanks: 10, planes: 25, ships: 20 },
      diplomacy: { allies: ["ENG"], enemies: ["GER"], neutral: ["ITA", "POL"] },
    },
    ENG: {
      name: "İngiltere",
      capital: "london",
      factories: { military: 15, civilian: 18, naval: 25 },
      resources: { steel: 90, oil: 110, manpower: 400 },
      focuses: [
        { id: "naval_supremacy", name: "Deniz Üstünlüğü", description: "Deniz gücünü artır.", completed: false },
        { id: "air_defense", name: "Hava Savunması", description: "Hava üslerini güçlendir.", completed: false },
        { id: "industrial_growth", name: "Sanayi Büyümesi", description: "Fabrika üretimini artır.", completed: false },
        { id: "alliance_strengthen", name: "İttifakları Güçlendir", description: "Diplomatik bağları artır.", completed: false },
        { id: "research_radar", name: "Radar Araştırması", description: "Teknolojiyi geliştir.", completed: false },
        { id: "colonial_recruitment", name: "Kolonilerden Seferberlik", description: "Manpower artır.", completed: false },
        { id: "air_force_expansion", name: "Hava Kuvvetleri Genişletmesi", description: "Uçak sayısını artır.", completed: false },
        { id: "tank_production", name: "Tank Üretimi", description: "Tank gücünü artır.", completed: false },
        { id: "fortify_islands", name: "Adaları Güçlendir", description: "Savunmayı artır.", completed: false },
        { id: "spy_network", name: "Casus Ağı", description: "İstihbarat faaliyetleri.", completed: false },
      ],
      army: { infantry: 35, tanks: 15, planes: 40, ships: 30 },
      diplomacy: { allies: ["FRA"], enemies: ["GER"], neutral: ["SOV"] },
    },
    SOV: {
      name: "Sovyetler Birliği",
      capital: "moscow",
      factories: { military: 22, civilian: 17, naval: 8 },
      resources: { steel: 120, oil: 90, manpower: 600 },
      focuses: [
        { id: "industrialization", name: "Sanayileşme", description: "Sanayi gücünü artır.", completed: false },
        { id: "collectivization", name: "Kolektivizasyon", description: "Tarımı organize et.", completed: false },
        { id: "red_army_expansion", name: "Kızıl Ordu Genişletme", description: "Orduyu büyüt.", completed: false },
        { id: "tank_development", name: "Tank Geliştirme", description: "Tank teknolojisi.", completed: false },
        { id: "air_force_growth", name: "Hava Kuvvetleri Büyümesi", description: "Hava gücünü artır.", completed: false },
        { id: "spy_network", name: "Casus Ağı", description: "İstihbarat.", completed: false },
        { id: "fortify_west", name: "Batı Sınırlarını Güçlendir", description: "Savunmayı artır.", completed: false },
        { id: "mobilization", name: "Seferberlik", description: "Manpower artır.", completed: false },
        { id: "research_artillery", name: "Topçu Araştırması", description: "Topçu gücünü artır.", completed: false },
        { id: "expand_influence", name: "Etkileşim Alanını Genişlet", description: "Diplomasiyle etkiyi artır.", completed: false },
      ],
      army: { infantry: 60, tanks: 25, planes: 35, ships: 10 },
      diplomacy: { allies: [], enemies: ["GER"], neutral: ["POL"] },
    },
    ITA: {
      name: "İtalya",
      capital: "rome",
      factories: { military: 12, civilian: 10, naval: 7 },
      resources: { steel: 70, oil: 50, manpower: 350 },
      focuses: [
        { id: "fascist_expansion", name: "Faşist Yayılma", description: "Toprak kazan.", completed: false },
        { id: "build_aviation", name: "Hava Kuvvetleri İnşası", description: "Uçak üretimini artır.", completed: false },
        { id: "naval_build", name: "Donanma İnşası", description: "Deniz gücünü geliştir.", completed: false },
        { id: "infantry_upgrades", name: "Piyade Yükseltmeleri", description: "Askeri güç artır.", completed: false },
        { id: "infrastructure", name: "Altyapı Geliştirme", description: "Lojistik artır.", completed: false },
        { id: "industrial_growth", name: "Sanayi Büyümesi", description: "Fabrika sayısını artır.", completed: false },
        { id: "mobilization", name: "Seferberlik", description: "Manpower artır.", completed: false },
        { id: "research_tanks", name: "Tank Araştırması", description: "Tank teknolojisini geliştir.", completed: false },
        { id: "expand_influence", name: "Etkileşim Alanını Genişlet", description: "Diplomasi geliştir.", completed: false },
        { id: "fortify_borders", name: "Sınır Güçlendirme", description: "Savunmayı artır.", completed: false },
      ],
      army: { infantry: 30, tanks: 10, planes: 15, ships: 12 },
      diplomacy: { allies: ["GER"], enemies: ["FRA"], neutral: ["ENG"] },
    },
  };

  let selectedCountryCode = null;

  // --- Yardımcı Fonksiyonlar ---

  // Haritaya şehirleri yerleştir
  function renderMap() {
    const map = document.getElementById("map");
    map.innerHTML = "";
    cities.forEach(city => {
      const cityDiv = document.createElement("div");
      cityDiv.className = "city";
      cityDiv.style.left = city.x + "%";
      cityDiv.style.top = city.y + "%";
      cityDiv.title = city.name + " (" + countries[city.country].name + ")";
      cityDiv.textContent = city.name[0];
      cityDiv.onclick = () => selectCountry(city.country);
      map.appendChild(cityDiv);
    });
  }

  // Ülke seçimi
  function selectCountry(code) {
    selectedCountryCode = code;
    const country = countries[code];
    document.getElementById("country-name").textContent = country.name;
    renderCountryInfo(country);
    renderFocusTree(country);
    renderDiplomacy(country);
    renderProduction(country);
    renderArmy(country);
    log(`"${country.name}" seçildi.`);
  }

  // Ülke bilgileri
  function renderCountryInfo(country) {
    const info = document.getElementById("country-info");
    info.innerHTML = `
      <strong>Başkent:</strong> ${cities.find(c => c.id === country.capital).name}<br>
      <strong>Fabrikalar:</strong> Askeri: ${country.factories.military}, Sivil: ${country.factories.civilian}, Deniz: ${country.factories.naval}<br>
      <strong>Kaynaklar:</strong> Çelik: ${country.resources.steel}, Petrol: ${country.resources.oil}, İşgücü: ${country.resources.manpower}<br>
    `;
  }

  // Odak Ağacı
  function renderFocusTree(country) {
    const container = document.getElementById("focus-tree");
    container.innerHTML = "";
    country.focuses.forEach(focus => {
      const div = document.createElement("div");
      div.className = "focus" + (focus.completed ? " completed" : "");
      div.textContent = focus.name;
      div.title = focus.description;
      if (!focus.completed) {
        div.onclick = () => completeFocus(country, focus.id);
      }
      container.appendChild(div);
    });
  }

  // Odak tamamla
  function completeFocus(country, focusId) {
    const focus = country.focuses.find(f => f.id === focusId);
    if (focus && !focus.completed) {
      focus.completed = true;
      applyFocusEffects(country, focusId);
      renderFocusTree(country);
      log(`${country.name} odak "${focus.name}" tamamlandı.`);
    }
  }

  // Odak etkileri
  function applyFocusEffects(country, focusId) {
    switch (focusId) {
      case "rearmament":
      case "red_army_expansion":
      case "mobilization":
        country.resources.manpower += 50;
        break;
      case "industrial_expansion":
      case "industrialization":
      case "industrial_growth":
        country.factories.civilian += 5;
        country.factories.military += 5;
        break;
      case "build_navy":
      case "naval_build":
      case "naval_build":
        country.factories.naval += 5;
        break;
      case "expand_influence":
        // Diplomatik ilişkileri artır (örnek: düşmanları azalt)
        if (country.diplomacy.enemies.length > 0) {
          country.diplomacy.enemies.pop();
        }
        break;
      case "fortify_borders":
      case "fortify_west":
      case "fortify_borders":
      case "fortify_islands":
        // Savunmayı artır - ordu güçlendirme
        country.army.infantry += 5;
        break;
      case "blitzkrieg":
        country.army.tanks += 10;
        break;
      case "research_tanks":
      case "tank_development":
      case "tank_production":
        country.army.tanks += 5;
        break;
      case "air_superiority":
      case "air_force_expansion":
      case "air_force_growth":
        country.army.planes += 10;
        break;
      // Diğer odaklar için eklemeler yapılabilir.
    }
  }

  // Diplomasi
  function renderDiplomacy(country) {
    const container = document.getElementById("diplomacy-info");
    container.innerHTML = `
      <strong>Müttefikler:</strong> ${country.diplomacy.allies.map(c => countries[c].name).join(", ") || "Yok"}<br>
      <strong>Düşmanlar:</strong> ${country.diplomacy.enemies.map(c => countries[c].name).join(", ") || "Yok"}<br>
      <strong>Tarafsızlar:</strong> ${country.diplomacy.neutral.map(c => countries[c].name).join(", ") || "Yok"}<br>
      <button onclick="declareWar()">Savaş İlan Et</button>
      <button onclick="offerPeace()">Barış Teklifi</button>
    `;
  }

  // Savaş ilanı (örnek: seçilen ülke düşman eklenir)
  function declareWar() {
    if (!selectedCountryCode) return alert("Önce ülke seçin.");
    const country = countries[selectedCountryCode];
    const enemyCode = prompt("Kime savaş ilan etmek istiyorsunuz? Ülke kodu girin (örn: GER, FRA):");
    if (!enemyCode || !countries[enemyCode]) {
      alert("Geçersiz ülke kodu.");
      return;
    }
    if (!country.diplomacy.enemies.includes(enemyCode)) {
      country.diplomacy.enemies.push(enemyCode);
      // Karşılıklı düşman ekle
      const enemy = countries[enemyCode];
      if (!enemy.diplomacy.enemies.includes(selectedCountryCode)) {
        enemy.diplomacy.enemies.push(selectedCountryCode);
      }
      log(`${country.name} ${enemy.name} ile savaşa girdi!`);
      renderDiplomacy(country);
    } else {
      alert("Zaten düşman durumundasınız.");
    }
  }

  // Barış teklifi (örnek: düşmanlardan çıkar)
  function offerPeace() {
    if (!selectedCountryCode) return alert("Önce ülke seçin.");
    const country = countries[selectedCountryCode];
    const enemyCode = prompt("Kime barış teklif etmek istiyorsunuz? Ülke kodu girin:");
    if (!enemyCode || !countries[enemyCode]) {
      alert("Geçersiz ülke kodu.");
      return;
    }
    if (country.diplomacy.enemies.includes(enemyCode)) {
      country.diplomacy.enemies = country.diplomacy.enemies.filter(c => c !== enemyCode);
      // Karşılıklı düşmanlıktan çıkar
      const enemy = countries[enemyCode];
      enemy.diplomacy.enemies = enemy.diplomacy.enemies.filter(c => c !== selectedCountryCode);
      log(`${country.name} ve ${enemy.name} barış yaptı.`);
      renderDiplomacy(country);
    } else {
      alert("Zaten düşman değilsiniz.");
    }
  }

  // Üretim paneli
  function renderProduction(country) {
    const container = document.getElementById("production-info");
    container.innerHTML = `
      <strong>Askeri Fabrikalar:</strong> ${country.factories.military}<br>
      <strong>Sivil Fabrikalar:</strong> ${country.factories.civilian}<br>
      <strong>Deniz Fabrikaları:</strong> ${country.factories.naval}<br>
      <button onclick="buildFactory('military')">Askeri Fabrika İnşa Et (Kaynak: 50 Çelik)</button>
      <button onclick="buildFactory('civilian')">Sivil Fabrika İnşa Et (Kaynak: 30 Çelik)</button>
      <button onclick="buildFactory('naval')">Deniz Fabrikası İnşa Et (Kaynak: 40 Çelik)</button>
    `;
  }

  // Fabrika inşası
  function buildFactory(type) {
    if (!selectedCountryCode) return alert("Önce ülke seçin.");
    const country = countries[selectedCountryCode];
    let cost = 0;
    switch(type) {
      case "military": cost = 50; break;
      case "civilian": cost = 30; break;
      case "naval": cost = 40; break;
    }
    if (country.resources.steel >= cost) {
      country.resources.steel -= cost;
      country.factories[type]++;
      log(`${country.name} bir ${type} fabrikası inşa etti.`);
      renderProduction(country);
      renderCountryInfo(country);
    } else {
      alert("Yeterli çelik yok.");
    }
  }

  // Askeri panel
  function renderArmy(country) {
    const container = document.getElementById("army-info");
    container.innerHTML = `
      <strong>Piyade:</strong> ${country.army.infantry}<br>
      <strong>Tank:</strong> ${country.army.tanks}<br>
      <strong>Uçak:</strong> ${country.army.planes}<br>
      <strong>Gemi:</strong> ${country.army.ships}<br>
      <button onclick="trainArmy('infantry')">Piyade Eğit (İşgücü: 10)</button>
      <button onclick="trainArmy('tanks')">Tank Üret (Fabrika: 5, Çelik: 30)</button>
      <button onclick="trainArmy('planes')">Uçak Üret (Fabrika: 3, Çelik: 20)</button>
      <button onclick="trainArmy('ships')">Gemi İnşa Et (Fabrika: 4, Çelik: 40)</button>
    `;
  }

  // Askeri eğitim / üretim
  function trainArmy(type) {
    if (!selectedCountryCode) return alert("Önce ülke seçin.");
    const country = countries[selectedCountryCode];
    switch(type) {
      case "infantry":
        if (country.resources.manpower >= 10) {
          country.resources.manpower -= 10;
          country.army.infantry++;
          log(`${country.name} bir piyade birimi eğitti.`);
        } else {
          alert("Yeterli işgücü yok.");
        }
        break;
      case "tanks":
        if (country.factories.military >=5 && country.resources.steel >= 30) {
          country.factories.military -= 5;
          country.resources.steel -= 30;
          country.army.tanks++;
          log(`${country.name} bir tank üretti.`);
        } else {
          alert("Yeterli fabrika veya çelik yok.");
        }
        break;
      case "planes":
        if (country.factories.military >=3 && country.resources.steel >= 20) {
          country.factories.military -= 3;
          country.resources.steel -= 20;
          country.army.planes++;
          log(`${country.name} bir uçak üretti.`);
        } else {
          alert("Yeterli fabrika veya çelik yok.");
        }
        break;
      case "ships":
        if (country.factories.naval >=4 && country.resources.steel >= 40) {
          country.factories.naval -= 4;
          country.resources.steel -= 40;
          country.army.ships++;
          log(`${country.name} bir gemi inşa etti.`);
        } else {
          alert("Yeterli fabrika veya çelik yok.");
        }
        break;
    }
    renderArmy(country);
    renderProduction(country);
    renderCountryInfo(country);
  }

  // Olay günlüğü
  function log(text) {
    const logDiv = document.getElementById("log");
    const time = new Date().toLocaleTimeString();
    logDiv.innerHTML += `[${time}] ${text}<br>`;
    logDiv.scrollTop = logDiv.scrollHeight;
  }

  // Oyunu başlat
  function init() {
    renderMap();
    // Varsayılan ülke seçimi Almanya
    selectCountry("GER");
  }

  window.onload = init;

</script>
</body>
</html>
